pipeline{
    agent any 
    stages{
      stage("Source code Pull from Github"){
          steps{
              sh 'echo passed'
      //git branch: 'main', url: 'https://github.com/ShikhaaSharmaa45/100.git'
          }
      }
      stage("Build & Push Docker Image"){
          environment {
              DOCKER_IMAGE = "shikha1818/$JOB_NAME.$BUILD_ID"
              // DOCKERFILE_LOCATION = "Dockerfile"
            
          }
          steps{
              script{
                  sh 'docker image build -t ${DOCKER_IMAGE} .'
                  withCredentials([usernamePassword(credentialsId: 'shikha1818', passwordVariable: 'shikha1818', usernameVariable: 'shikha1818')]) {
    // some block
                  sh 'docker login -u shikha1818 -p ${shikha1818}'
                  sh 'docker image push ${DOCKER_IMAGE}'
                  sh 'docker container run -it -d -p 9000:80 ${DOCKER_IMAGE}'
}

              }
          }
      }
    
    }
}
