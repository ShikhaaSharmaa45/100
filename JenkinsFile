pipeline{
    agent any
    stages{
       stage("pull code"){
           steps{
               sh "echo passed"
               //git branch: 'main', url: 'https://github.com/ShikhaaSharmaa45/100.git'
           }
       } 
       stage("Build and push"){
           environment{
               DOCKER_IMAGE = "shikha1818/thepipeline:${BUILD_NUMBER}"
               // DOCKERFILE_LOCATION = "Dockerfile"
               REGISTRY_CREDENTIALS = credentials('shikha1818')
           }
           steps{
               script{
                   sh 'docker build -t ${DOCKER_IMAGE} .'
                   withCredentials([usernamePassword(credentialsId: 'shikha1818', passwordVariable: 'cend', usernameVariable: 'usr')]) {
    // some block
    sh 'docker logout'
    sh 'echo ${cend} |docker login -u ${usr} --password-stdin'
    sh 'docker image push ${DOCKER_IMAGE}'
}
                   }
               }
           }
       }
    }
