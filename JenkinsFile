pipeline{
    agent any
    stages{
       stage("pull code"){
           steps{
               sh "echo passed"
               //git branch: 'main', url: 'https://github.com/ShikhaaSharmaa45/100.git'
           }
       } 
       stage("Build and push"){
           environment{
               DOCKER_IMAGE = "shikha1818/thepipeline:${BUILD_NUMBER}"
               // DOCKERFILE_LOCATION = "Dockerfile"
               REGISTRY_CREDENTIALS = credentials('shikha1818')
           }
           steps{
               script{
                   sh 'docker build -t ${DOCKER_IMAGE} .'
                   docker.withRegistry('https://registry.example.com', 'shikha1818'){
                       def customImage = docker.build("thepipeline:${env.BUILD_ID}")
                       thepipeline.push()
                   }
               }
           }
       }
    }
}
